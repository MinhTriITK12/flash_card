<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Flashcard √în T·∫≠p</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>üìö Flashcard Ghi Nh·ªõ Nhanh</h1>
        <div class="filters">
            <button class="filter-btn active" onclick="filterCards('all')">T·∫•t c·∫£</button>
            <button class="filter-btn" onclick="filterCards('To√°n')">To√°n</button>
            <button class="filter-btn" onclick="filterCards('Ti·∫øng Anh')">Ti·∫øng Anh</button>
            <button class="filter-btn" onclick="filterCards('Tin h·ªçc')">Tin h·ªçc</button>
        </div>
    </header>

    <section class="input-section">
        <div class="section-header">
            <h2>‚ûï Th√™m Flashcard M·ªõi</h2>
            <div class="data-controls">
                <button class="control-btn export-btn" onclick="exportData()" title="T·∫£i d·ªØ li·ªáu">üíæ Xu·∫•t</button>
                <button class="control-btn import-btn" onclick="document.getElementById('import-file').click()" title="T·∫£i d·ªØ li·ªáu t·ª´ file">üìÇ Nh·∫≠p</button>
                <input type="file" id="import-file" style="display: none;" accept=".json" onchange="importData(event)">
            </div>
        </div>
        <div class="input-container">
            <select id="subject-select" class="input-field" onchange="updateLessons()">
                <option value="">-- Ch·ªçn m√¥n h·ªçc --</option>
                <option value="To√°n">To√°n</option>
                <option value="Ti·∫øng Anh">Ti·∫øng Anh</option>
                <option value="Tin h·ªçc">Tin h·ªçc</option>
            </select>
            <select id="lesson-select" class="input-field">
                <option value="">-- Ch·ªçn b√†i h·ªçc --</option>
            </select>
            <textarea id="question-input" class="input-field" rows="4" placeholder="Nh·∫≠p c√¢u h·ªèi... (h·ªó tr·ª£ xu·ªëng d√≤ng)"></textarea>
            <textarea id="answer-input" class="input-field" rows="3" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi... (h·ªó tr·ª£ xu·ªëng d√≤ng)"></textarea>
            <button class="add-btn" onclick="addNewCard()">Th√™m Th·∫ª</button>
        </div>
    </section>

    <!-- Exam sets (ƒê·ªÅ) controls -->
    <section class="exam-set-controls" style="margin: 24px 0 0 0; text-align: center;">
        <h4 style="color: #2c3e50;">üóÇ Qu·∫£n l√Ω ƒê·ªÅ (Exam Sets)</h4>
        <input id="new-exam-name" placeholder="T√™n ƒë·ªÅ (vd: ƒê·ªÅ 1)" style="padding:8px 12px;border-radius:4px;border:1px solid #ccc;margin-right:8px;">
        <button onclick="addExamSetFromInput()" style="background:#f39c12;color:white;padding:8px 16px;border:none;border-radius:6px;font-weight:bold;cursor:pointer;">Th√™m ƒë·ªÅ t·ª´ view hi·ªán t·∫°i</button>
        <div id="exam-tabs-container" style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap; justify-content:center;">
            <!-- exam tabs rendered by JS -->
        </div>
    </section>

    <div class="app-tabs">
        <button class="tab-btn active" data-mode="learn" onclick="switchMode('learn')">Th·∫ª ghi nh·ªõ</button>
        <button class="tab-btn" data-mode="practice" onclick="switchMode('practice')">Luy·ªán t·∫≠p</button>
        <button class="tab-btn" data-mode="exam" onclick="switchMode('exam')">Thi th·ª≠</button>
    </div>

    <main class="main-area">
        <section id="lesson-selector" class="lesson-selector">
            <div class="lesson-selector-header">
                <h3>üìñ Ch·ªçn B√†i H·ªçc</h3>
                <button class="add-lesson-toggle-btn" onclick="toggleAddLessonForm()">‚ûï Th√™m B√†i</button>
            </div>
            
            <div id="add-lesson-form" class="add-lesson-form" style="display: none;">
                <h4>Th√™m B√†i H·ªçc M·ªõi</h4>
                <div class="lesson-input-container">
                    <select id="new-lesson-subject" class="lesson-input-field">
                        <option value="">-- Ch·ªçn m√¥n h·ªçc --</option>
                        <option value="To√°n">To√°n</option>
                        <option value="Ti·∫øng Anh">Ti·∫øng Anh</option>
                        <option value="Tin h·ªçc">Tin h·ªçc</option>
                    </select>
                    <input type="text" id="new-lesson-name" class="lesson-input-field" placeholder="T√™n b√†i h·ªçc (vd: H√¨nh h·ªçc n√¢ng cao)">
                    <button class="lesson-add-btn" onclick="addNewLesson()">Th√™m</button>
                </div>
            </div>

            <div id="lesson-buttons" class="lesson-buttons">
                <!-- S·∫Ω ƒë∆∞·ª£c populate b·ªüi JS -->
            </div>

            <!-- Tabs ƒë·ªÅ s·ªë -->
            <div class="exam-tabs">
                <h4 style="margin-bottom: 12px; color: #2c3e50;">üìù Ch·ªçn ƒê·ªÅ S·ªë:</h4>
                <div class="exam-tabs-buttons">
                    <button class="exam-tab-btn active" onclick="filterByExam('all')">T·∫•t c·∫£</button>
                    <button class="exam-tab-btn" onclick="filterByExam(1)">ƒê·ªÅ s·ªë 1</button>
                    <button class="exam-tab-btn" onclick="filterByExam(2)">ƒê·ªÅ s·ªë 2</button>
                    <button class="exam-tab-btn" onclick="filterByExam(3)">ƒê·ªÅ s·ªë 3</button>
                    <button class="exam-tab-btn" onclick="filterByExam(4)">ƒê·ªÅ s·ªë 4</button>
                </div>
            </div>
        </section>

        <section id="large-card-area" class="large-card-area">
            <div id="large-card" class="large-card-container">
                <div id="flip-card" class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div class="subject-tag"></div>
                            <div class="lesson-tag"></div>
                            <div class="question">Nh·∫•p v√†o ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>
                            <div class="hint">üí° Nh·∫•p ƒë·ªÉ l·∫≠t | Space ƒë·ªÉ l·∫≠t | ‚Üê ‚Üí ƒë·ªÉ ƒëi·ªÅu h∆∞·ªõng</div>
                        </div>
                        <div class="flip-card-back">
                            <div class="subject-tag"></div>
                            <div class="lesson-tag"></div>
                            <div class="answer">C√¢u tr·∫£ l·ªùi s·∫Ω xu·∫•t hi·ªán t·∫°i ƒë√¢y</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="left-controls">
                    <button class="icon-btn" onclick="prevCard()" title="Th·∫ª tr∆∞·ªõc">‚óÄ</button>
                    <div class="progress-indicator"><span id="current-index">1</span> / <span id="total-count">0</span></div>
                    <button class="icon-btn" onclick="nextCard()" title="Th·∫ª ti·∫øp">‚ñ∂</button>
                </div>

                <div class="right-controls">
                    <button class="icon-btn delete-card-btn" id="delete-current-btn" onclick="deleteCurrentCard()" title="X√≥a th·∫ª n√†y">üóëÔ∏è</button>
                    <button class="icon-btn" id="play-btn" onclick="togglePlay()" title="T·ª± ƒë·ªông ph√°t">‚ñ∂</button>
                    <button class="icon-btn" id="shuffle-btn" onclick="toggleShuffle()" title="X√°o tr·ªôn">üîÄ</button>
                    <button class="icon-btn" onclick="toggleViewMode()" title="Xem danh s√°ch">üìã</button>
                    <button class="icon-btn" onclick="toggleFullscreen()" title="To√†n m√†n h√¨nh">‚õ∂</button>
                </div>
            </div>

            <div class="progress-bar-wrap">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
        </section>

        <section id="grid-area" class="card-grid" style="display:none;">
            <!-- Grid render -->
        </section>

        <section id="list-area" class="card-list-area" style="display:none;">
            <div class="list-header">
                <h3>üìã Danh S√°ch Flashcard</h3>
                <button class="close-list-btn" onclick="toggleViewMode()">‚úï</button>
            </div>
            <div id="list-container" class="list-container">
                <!-- S·∫Ω ƒë∆∞·ª£c populate b·ªüi JS -->
            </div>
        </section>
    </main>

    <script src="scipt.js"></script>
</body>
</html>